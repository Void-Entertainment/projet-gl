<!doctype html>
<html>
    <head>
        <title>Escape From Lannion City</title>
        <style>
            #but{
                width:335px;
                margin: auto;
            }
            button{
                border: 0;
                background: #4CAFA1;
                color: white;
                border-radius: 4px;
                font-size: 1em;
                font-weight: 500;
                height: 2.5em;
                line-height: 2.5;
                padding: 0 1em;
                min-width: 10em;
                text-align: center;
                cursor: pointer;
                outline: none;
                text-decoration: none;
                transform: translateY(0);
                transition: all .15s ease;
            }
            h2,h3{text-align: center;}

            table {
                font-family: Arial, Helvetica, sans-serif;
                border-collapse: collapse;
                width: 90%;
                margin: auto;
            }

            table th {
                border: 1px solid #ddd;

            }

            tr:nth-child(even){background-color: #f2f2f2;}

            tr:hover {background-color: #ddd;}
            tr{text-align: center;}
            th {
                padding-top: 12px;
                padding-bottom: 12px;
                text-align: center;
                background-color: #4CAFA1;
                color: white;
            }
            #toTop {
  padding: .5em 1em;
  width: auto;
  display: none;
  text-align: center;
  position: fixed;
  bottom: 20px;
  right: 30px;
  z-index: 99;
  color: white;
  font-size: 18px;
  border: 0;
  border-radius: 4px;
  outline: none;
  cursor: pointer;
  text-decoration: none;
  background: #4CAFA1;
  box-shadow: 0 4px 6px rgba(0, 0, 0, .1), 0 1px 3px rgba(0, 0, 0, .08);
  transform: translateY(0);
  transition: all .15s ease;
}

#toTop:hover {
  background-color: #064508;
}
        </style>
        <script type="text/javascript" src="Local.js"></script>
        <script type="text/javascript" src="Tableau.js"></script>
        <script type="text/javascript">
            function Tab(arr,id){
              /*  if( data[0]!=null){
                    var arr= new Array(JSON.parse(data[0]));}
                for (var i = 1; i < data.length; i++) {
                    arr.push(JSON.parse(data[i]));
                }*/

                var table = document.createElement("table"), row, cellA, cellB, cellC, cellD, cellE;
                document.getElementById(id).appendChild(table);

                row = document.createElement("tr");
                cellA = document.createElement("th");
                cellB = document.createElement("th");
                cellC = document.createElement("th");
                cellD = document.createElement("th");
                cellE = document.createElement("th");
                // (C3) KEY & VALUE
                cellA.innerHTML = "rang";
                cellB.innerHTML = "pseudo";
                cellC.innerHTML = "score";
                cellD.innerHTML = "temps";
                cellE.innerHTML = "date";

                table.appendChild(row);
                row.appendChild(cellA);
                row.appendChild(cellB);
                row.appendChild(cellC);
                row.appendChild(cellD);
                row.appendChild(cellE);
                
                arr.sort((a, b) => parseFloat(b.score) - parseFloat(a.score));

                for (var i = 0; i < arr.length; i++) {
                    // (C2) ROWS & CELLS
                    row = document.createElement("tr");
                    cellA = document.createElement("td");
                    cellB = document.createElement("td");
                    cellC = document.createElement("td");
                    cellD = document.createElement("td");
                    cellE = document.createElement("td");
                    // (C3) KEY & VALUE
                    cellA.innerHTML = (i+1).toString();
                    cellC.innerHTML = arr[i].score;
                    cellB.innerHTML = arr[i].pseudo;
                    cellD.innerHTML = arr[i].temps;
                    cellE.innerHTML = arr[i].date;
                    // (C4) ATTACH ROW & CELLS
                    table.appendChild(row);
                    row.appendChild(cellA);
                    row.appendChild(cellB);
                    row.appendChild(cellC);
                    row.appendChild(cellD);
                    row.appendChild(cellE);
                    // alert(JSON.parse(data[0]).score);
                    //alert(mydata[1]);
                }
            }
        function load() {
            //var mydata = JSON.parse(data);
            //data = data.replace(/\\/g, '');
           if(typeof Local !== 'undefined'){
               if( Local[0]!=null){
                   var arr= new Array(JSON.parse(Local[0]));}
            for (var i = 1; i < Local.length; i++) {
                arr.push(JSON.parse(Local[i]));
            }
               Tab(arr,"tableau");
           }else{
               alert("Pas encore de score sur cet ordinateur")
           }
           if(typeof Tableau !== 'undefined'){
               Tab(Tableau,"tableau2")
           }else{
               alert("Le classement général n'a pas été téléchargé")
           }

        }
            function Loc(){
                var y= document.getElementById("tableau");
                var x= document.getElementById("tableau2");
                if(x.style.display=="none"){
                    x.style.display="block";
                    y.style.display = "none"
                }else{
                    x.style.display="none";
                    y.style.display = "block"
                }
            }

            function Gen(){
                var x= document.getElementById("tableau");
                var y= document.getElementById("tableau2");
                if(x.style.display=="none"){
                    x.style.display="block";
                    y.style.display = "none"
                }else{
                    x.style.display="none";
                    y.style.display = "block"
                }
            }
  // When the user scrolls down 20px from the top of the document, show the button
window.onscroll = function() {
  scrollFunction();
};

function scrollFunction() {
  if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
    document.getElementById("toTop").style.display = "block";
  } else {
    document.getElementById("toTop").style.display = "none";
  }
}
// When the user clicks on the button, scroll to the top of the document
function topFunction() {
  document.body.scrollTop = 0;
  document.documentElement.scrollTop = 0;
}
        </script>
    </head>
    <body onload="load()">
    <h2>Tableau des scores</h2>
    </br>
    <div id="but">
        <button onclick="Loc()">Mes scores</button>
        <button onclick="Gen()">Classment général</button>
    </div>
    </br>
    <div id="tableau">
        <h3>Mes Scores</h3>
    </div>
    <div id="tableau2">
        <h3>Classement général</h3>
    </div>
    
    
      <span onclick="topFunction()" id="toTop" title="Go to top">Top</span>
    </body>
</html>